[BlackBletOnlne]クラウドのためのアーキテクチャ設計-ベストプラクティス- .md

## 伝えたいこと
- クラウドらしいアーキテクチャを構築するための原則
- AWSでシステムを構築するためのベストプラクティス
- Archtecting for The Cloudにより深く書いてある。

## クラウドコンピューティングならではの特性
- IT資産がプログラマブルに
- グローバル展開、可用性、無制限のキャパ
- ハイレベルなマネージドサービスで開発効率向上
- Built-in Security（あらかじめセキュリティ対策がされている）

## 設計におけるベストプラクティス
### 10の設計プリンシプルを意識しよう！
#### スケーラビリティ
- 運用中のシステムを拡張/縮小させる能力
- 柔軟性の向上、コスト削減
- スケールの種類
    - 垂直スケーリング（スケールアップ/ダウン）
        - リソースの限界が存在
        - インスタンスの停止を伴う
    - 水平スケーリング（スケールアウト/イン）
        - 論理的には限界が存在しない
        - インスタンスの停止を伴わない
        - こころがけるポイント
            - ステートレスアプリケーション/コンポーネント
                - ステートフルになる要素を水平スケールするリソースの外部に配置
                    - セッション情報はDynamoDB、ElastiCacheへ
                    - バイナリファイル、ログはS3へ
            - 分散処理
                - 長時間かかっていた単一のタスクを分割できないか検討
                    - 1台で4時間かかるタスクを4台1時間にする。
            - 商用ライセンスの扱い注意。
#### 固定資産から可処分資産へ
#### 自動化
- AWSと自動化
    - あらゆる操作がAPIで動作するので、自動化しやすい
    - 自動かをサポートするサービスが豊富
    - インスタンスのスケール、復旧も自動化（AutoScaling、EC2 Auto Recovery）
    - CloudWatch Eventsを利用した運用自動化
        - cronライクで自動実行
    - AWS Lambdaのスケジュール実行
#### 疎結合
- Well-Defined Interface
    - アクセス元から見て、アクセス先をブラックボックスに。
    - 個々のリソースに固有の情報に依存しない
        - 必要な情報だけをわたし、APIでアクセス
        - IPアドレスではなく、DNS名でアクセス
        - 処理を実施するインスタンスへの直接アクセスを避け、ELB、SQSを経由する設計
- Service Discovery
    - 透過的にアクセスするために増えたリソース、減ったリソースを検知することが必要
    - ELBを挟むとよいよ
- Asynchronous Integration
    - 同期処理である必要がなければ、非同期処理でつながる
    - 非同期の利点
        - ユーザ側の利点
            - アプリケーションがブロックされない
        - サーバ側の利点
            - スケーラブルかつ高可用なバックエンド
            - フロントを止めずにバックだけのメンテができる
    - AWSだとどんな感じか
        - SQSを挟んで疎結合
        - Kinesisは大規模ストリーミングや、バックエンドで複数の処理をやらせたいとき。
- Graceful Failure
    - 安全に落とすための戦略
        - リソース停止、削除、障害時のサービスへの影響を最小限にする
#### サーバではなく、サービスの利用（マネージドサービスの活用）
- マネージドサービスを使おうぜ
- マネージドならServerlessもできるぜ
- 3つのサービス（責任共有）区分
    - Infrastructure Services（EC2、EBSとか）
    - Container Servicves（RDS、ELBとか）
    - Abstracted Services（）

#### データベースの使い分け
- 各サービスの得意不得意で使い分けること
    - ElastiCache
    - DynamoDB
    - RDS
    - Redshift

#### 単一障害点の排除
- ポイント
    - 冗長化
    - 障害検知
    - 堅牢なデータストレージ
    - Muliti-AZ
    - 疎結合な構成による障害分離

#### コストの最適化
- 適切なサイジング
- 伸縮自在性
- 適切な購入オプションの利用

#### キャッシュの利用
- 繰り返し利用されるデータをキャッシュ
    - ElastiCache
    - CloudFront

#### セキュリティ
- すべてのレイヤーでセキュリティを確保
    - セキュリティは掛け算
    - 一か所でもセキュリティホールがあれば、0になる。
- AWSの機能を積極的に活用して、よりシンプルに確保。